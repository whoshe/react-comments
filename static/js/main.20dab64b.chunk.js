(this["webpackJsonpmonsterlessons-academy"]=this["webpackJsonpmonsterlessons-academy"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(10),i=n.n(a),o=n(9),s=n(11),u=n(5),m=n(0),d=function(e){var t=e.handleSubmit,n=e.submitLabel,r=e.hasCancelButton,a=void 0!==r&&r,i=e.handleCancel,o=e.initialText,s=void 0===o?"":o,d=Object(c.useState)(s),l=Object(u.a)(d,2),b=l[0],j=l[1],f=0===b.length;return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(b),j("")},children:[Object(m.jsx)("textarea",{className:"comment-form-textarea",value:b,onChange:function(e){return j(e.target.value)}}),Object(m.jsx)("button",{className:"comment-form-button",disabled:f,children:n}),a&&Object(m.jsx)("button",{type:"button",className:"comment-form-button comment-form-cancel-button",onClick:i,children:"Cancel"})]})},l=function e(t){var n=t.comment,c=t.replies,r=t.setActiveComment,a=t.activeComment,i=t.updateComment,o=t.deleteComment,s=t.addComment,u=t.parentId,l=void 0===u?null:u,b=t.currentUserId,j=a&&a.id===n.id&&"editing"===a.type,f=a&&a.id===n.id&&"replying"===a.type,h=new Date-new Date(n.createdAt)>3e5,p=b===n.userId&&0===c.length&&!h,O=Boolean(b),v=b===n.userId&&!h,x=l||n.id,y=new Date(n.createdAt).toLocaleDateString();return Object(m.jsxs)("div",{className:"comment",children:[Object(m.jsx)("div",{className:"comment-image-container",children:Object(m.jsx)("img",{src:"./user-icon.png",alt:"user"})}),Object(m.jsxs)("div",{className:"comment-right-part",children:[Object(m.jsxs)("div",{className:"comment-content",children:[Object(m.jsx)("div",{className:"comment-author",children:n.username}),Object(m.jsx)("div",{children:y})]}),!j&&Object(m.jsx)("div",{className:"comment-text",children:n.body}),j&&Object(m.jsx)(d,{submitLabel:"Update",hasCancelButton:!0,initialText:n.body,handleSubmit:function(e){return i(e,n.id)},handleCancel:function(){r(null)}}),Object(m.jsxs)("div",{className:"comment-actions",children:[O&&Object(m.jsx)("div",{className:"comment-action",onClick:function(){return r({id:n.id,type:"replying"})},children:"Reply"}),v&&Object(m.jsx)("div",{className:"comment-action",onClick:function(){return r({id:n.id,type:"editing"})},children:"Edit"}),p&&Object(m.jsx)("div",{className:"comment-action",onClick:function(){return o(n.id)},children:"Delete"})]}),f&&Object(m.jsx)(d,{submitLabel:"Reply",handleSubmit:function(e){return s(e,x)}}),c.length>0&&Object(m.jsx)("div",{className:"replies",children:c.map((function(t){return Object(m.jsx)(e,{comment:t,setActiveComment:r,activeComment:a,updateComment:i,deleteComment:o,addComment:s,parentId:n.id,replies:[],currentUserId:b},t.id)}))})]})]},n.id)},b=n(2),j=n(6),f=function(){var e=Object(j.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"1",body:"First comment",username:"Jack",userId:"1",parentId:null,createdAt:"2021-08-16T23:00:33.010+02:00"},{id:"2",body:"Second comment",username:"John",userId:"2",parentId:null,createdAt:"2021-08-16T23:00:33.010+02:00"},{id:"3",body:"First comment first child",username:"John",userId:"2",parentId:"1",createdAt:"2021-08-16T23:00:33.010+02:00"},{id:"4",body:"Second comment second child",username:"John",userId:"2",parentId:"2",createdAt:"2021-08-16T23:00:33.010+02:00"}]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(Object(b.a)().mark((function e(t){var n,c=arguments;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,e.abrupt("return",{id:Math.random().toString(36).substr(2,9),body:t,parentId:n,userId:"1",username:"John",createdAt:(new Date).toISOString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(Object(b.a)().mark((function e(t){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){e.commentsUrl;var t=e.currentUserId,n=Object(c.useState)([]),r=Object(u.a)(n,2),a=r[0],i=r[1],b=Object(c.useState)(null),j=Object(u.a)(b,2),v=j[0],x=j[1],y=a.filter((function(e){return null===e.parentId})),C=function(e,t){h(e,t).then((function(e){i([e].concat(Object(s.a)(a))),x(null)}))},I=function(e,t){p(e).then((function(){var n=a.map((function(n){return n.id===t?Object(o.a)(Object(o.a)({},n),{},{body:e}):n}));i(n),x(null)}))},g=function(e){window.confirm("Are you sure you want to remove comment?")&&O().then((function(){var t=a.filter((function(t){return t.id!==e}));i(t)}))};return Object(c.useEffect)((function(){f().then((function(e){i(e)}))}),[]),Object(m.jsxs)("div",{className:"comments",children:[Object(m.jsx)("h3",{className:"comments-title",children:"Comments"}),Object(m.jsx)("div",{className:"comment-form-title",children:"Write comment"}),Object(m.jsx)(d,{submitLabel:"Write",handleSubmit:C}),Object(m.jsx)("div",{className:"comments-container",children:y.map((function(e){return Object(m.jsx)(l,{comment:e,replies:(n=e.id,a.filter((function(e){return e.parentId===n})).sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}))),activeComment:v,setActiveComment:x,addComment:C,deleteComment:g,updateComment:I,currentUserId:t},e.id);var n}))})]})},x=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Hello monsterlessons"}),Object(m.jsx)(v,{commentsUrl:"http://localhost:3004/comments",currentUserId:"1"})]})};n(17);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.20dab64b.chunk.js.map